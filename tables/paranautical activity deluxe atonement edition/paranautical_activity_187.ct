<?xml version="1.0" encoding="utf-8"?>
<CheatTable CheatEngineTableVersion="21">
  <Forms>
    <weapon_editor Class="TCEForm" Encoding="Ascii85">y@]OG)=Ar*)^=,FP3npWiXaRk=1ixCD(Bd}P5(+#-I?efL?3kbq!}J$i8E7Tz3^bsEg!+YlCG^S2nt=;?0_H@zTcdAabQ^TZ2ZiQ^n1#,b-x5s2tJ3DY9S8-$aLp+8%:;ObKOolu[*RfyO%W8dFNZ)[DP_s.HZCD,3:^cc_N1S[1?(x@2(6/eI@vxUNbA%Da$npe6e1LQ{Nkd6UygxyUNghvX5{Titwn3aIe*n*39!Ohy9(U$B}wlFI5ZKQ7-gy!.v=k3]lyU?WiOYP$VnRI3OFI/RH/Vi3Cnk[+p;[O.!w0KOhPu-v7t)rBG?iO5}0iSz)]WZty#Ap1)wPENN.ut!_^Z4D8#98cI/NMacuIv:fuXg-k*VE$bR:k1,i!Yv+h0uVCE*:QO8]m/:G+B:cf0Kom!%kSX#*NCag#q=uv!PMIh)s]Bbm,$rH-?XRC=47oLSb=%QmEz5EYPe2yHoaTE^ukG:k/ZeYWYDgZou3pa3OoCF[kHg@Udt93QfD1.ph6!tdlbrA,V5,@b.QH9liHtzo-rzhsoBPv27;)jy-4aYl,fJC-C2,T?HN)H)s=/4I1L[VWC9Jm0s7]Xbmlf{bDJ}e*L+8x)qk3!G+^7i-nRaKyJP%zBaC*]a9dvHse*anbuY+6h8T]Y*gLe{aLi)Sutse</weapon_editor>
    <item_editor Class="TCEForm" Encoding="Ascii85">-I}vDBu5p.#}!a_^9]x3!t!H7s1-!*3TN.pSt$](5qtb:i5*vTgH{XHqnhrT;B;{hb+id89+YA*T#$0+z:=kYF8l?j32?;c.F:rnRdu)!,tU**Ude{X(D4,n*T^Tt=@S:$Yqf=KN4uS2_L^nvaElujj,oDlRBNYfV%q.*SwCTX8kqK1EA63-,ka?=dBuGbwEwfx;C?P78Lbz*ZTAIdk.yx4x(QM%:TTos%^rU5kB6UITQGe.VBTzBUag088Zl#MUtLcpU%kI{!XvZ)axXD5q:tJ]hz0Sa5X;^02q[JjC;atKv5,({BadH1o=:upO%@gy+;7RFL^Xn7nixsm_KJHe*asghrqzS_k:D:bGPaLoWP1I8ssS@d=Y(P2FGl@7y[bW-.imga3aL6BPwWfo(9-b=y5_3G+#ADIAzSYr?hj%+g=7CzxbcEcXA._HH[2xS72GVK@})cAC#DOe0vb)OXWK)I7jn+25@r8m1w64![n!Ma2.;}]bi3K7jqZ=,(y}.AYO7Vk,nG]rGttZWKHn2U(H,upNG#{rDWo*}Vn%:*wt9;U9!(_4v_-dIazegH!Wf!+#G=FhiqhmLw}yVFWFQmKe4s03pxd$JT1KO;497K8hkL%SiTfS#DHu3ItYE=!WVBSnd{0Ubkpl?/8-Ypl$P/ar.B*j2en.3/3?3)PGHqe,--dnRrrF1lnh$%m413L(SBvG4?4M-MGvyHg/2q$TQ%3LSjMffdl.+Q)m*UgnED/n_T,Zjwv7)VF9qoyb.7Z^zJF}Oy^r8!B_6=oXb#IW4Ozel_lUpm3,tf7jM.abzww(EBZ)[+{zMpCm%1ai*WJJddPw#?f]_NEp4[K7B%c,t^/Xf[TP06nMIoQnsOiTtiar2=xsX,At2/[2GMr:9McMhly$d=KCW*RAOoiCHI0MAHc3?3!%.GMCBMfi@.2;W(#avrhfBV4bX:ot/9j9%9O9RE5OH#RotB#wb3P1@!Sg$dHu9y!Fw0ilFlGPNLvhYWuPv{Y]hNj-9mfyFkz:X];t^[l,XFsI*ABwbnanRm+{+L_=Pz^QyM-(z(qADsa%O^SnSl=}Y7LZ#9qpkjjH1yvB,CsNtNub4I^knHCqD#?dQ)mb#.HlJj-O!7]h6[,)2e^lhDG#,zQkKi(noP6$lCgqCg02IA5MI,{[]4w-PE1!;Yj)5(+zUE]xs0j9n.Bm{U4amPZi%cVWtmGG%/OpaQ11k;;@)zcV6p5O(P45tH$P^#vChzXPok;!RMVOAcMjO)4.8#7C@;$xcTj#JjJmQ8@kp?2*Q5zYj@TN*S#Mf!QO]Rk6Jk8(z%{OFL7E}LM5u6FXX16^cqPvY]hTNvCxd)?R$?M*MQ;B:ICX+-wha:;0UIgwPcoz+)lY:w2ejf(zR?7TDA:t-dfylsRH6Qv]8Tyu?/1sg+3Al=I/]15MHHT7xZgW!-UxA(LHQDcSUUy(G5kcJ?!I.elwq1#DF.};9i+HYz0x0ANKY6-alnn6AqNEwhx}ve?F6:zb:XbZv=.Z=!J?Nu^o@-BjIDTxMt[hT!:lK:MI{ruRsXO}wRP#v@L({gIe](Qs])Mj*u?jh_@s{Lw(-Y(CK.wvFgxKof9vrwt0hL1/-aG*zBZxwC4wCl.?P,gH3dh)1yf+LU)F6mQ;z2C9uQR)9H;J!yoZt0rKHN7dho44{m8DW5SgCORY-#atf?P],gb:2B/R%aP70Nc)-$8$7@}15Em,%}z(Vk#lbq.%W9nI)ajf)NYSV{EyEwBc1IEV#]C,8BNMMAEnLx9XwR^ndO:4zTqP,vPBu!PfF=#C;qn0#cC0kpFh.HIVS1N%WLGG^]#.($h?k?xL7ZIQ6}oAAwQ9n4TQ.X0[/f!/Oxhjb+S@T-k;ur[G+88tz#l)iKy.6XY_@Z9,N!jD}YF:7i:!_%a/0;%pV7.}loR)j*7%E{6y4q-HMxOfdJ1?_lY=KF[u*Ij;#DbArW[?F:RkrOF:m,PWW#lkB?d]xUzD9RJ1LOy$p/2N7Mw/}o*4$-,7-+2)IzFn!dWq}or/sm:6C.)1=Fla0?mzWt?p--0vGFN3)H0Hio/Yh,uk:;UWTU3($LX^CE#p?ypzEdeMfOv_juG?_0FG2oOq2Zhx4s1gj?1+xqh%b?}f*]OzhT19s9W#$-ExmG/Rj2}:-K5Q?]JiInSgskt0gvl_K6UcdnJ16Hcs-t)Hl$bzuMQ_:[pTm8FKMro3;2+rODW[C:W0I3=@dEvnCJj*sD_Rj0V]g}XnxJIQfq!a6L2$?S36+]g%Vk,wX6-N1K0vqIUy)nu)Na[%{4ybimAqO4$Y$)n:Zd#ILj;6mYK3kg8%1onmkt0n{JC9]4}Jg%A[aGiXX1rw(DxB4Dtz@HXrf#%ZS[4#2N5vx5D/VTa@{VxHnrA=[(2dSUWka[HptW7}(5ql}Y$U9SM0@Tj%a(si%7j1s37i1D}o-Thnvbh6+Hr/M)^!b}V*1LCGmj*qIc-E1[Hi0[vri($Q_?_9q3aE1cUoOeG:hNi*wqp:H4[,Ka2oFXxQLG6JWWK-Nh!?9WJ#kKwhK.y(KkV)hw6VIk[TvE4Q]Wxf,;;CLa)s+hK0ON4:YnC9:(o8=^FxMtC4BE9S-tWIT^-o%#)P9.pMZc5e)r2Ig_)eg7_zs,fFd:B}l5f0jXUO%ijQAz8)LX[t6=w-*.c!86m)$5q:w)eMq44_,3E]W6G/}v^.+ervB@b(Kr)Ai6EIBH0+NZ=+*EQPRwS3ak(firoljQ#FZF=?gHk{7bp%N4=)GKH^2$M)qMVE_bZ^88dV;fjlo+o474Jp2CJZ*7q_#:!j.C.D+r!](U^O%}x.iu?KG-xI_[APtEK4w(_^K[FrRHhe0dl.m6ctDA!P8,LS1gXiu,n!is!szgtBK^)O?6QV^fzxRp?VRf*OD)K3yi$(W^7hmWsNRWq1Lg;*-8)[cY)/Bw:97qMBFOX@Z;,e.U@XLqNmwn-Qj!.o{lwUoz@[:c*4{Fr2,/a)^TCLXq00</item_editor>
  </Forms>
  <CheatEntries>
    <CheatEntry>
      <ID>10</ID>
      <Description>"Weapon"</Description>
      <LastState Value="" RealAddress="00000000"/>
      <Color>0000FF</Color>
      <GroupHeader>1</GroupHeader>
      <CheatEntries>
        <CheatEntry>
          <ID>2</ID>
          <Description>"Weapon Editor"</Description>
          <LastState/>
          <Color>004000</Color>
          <VariableType>Auto Assembler Script</VariableType>
          <AssemblerScript>[enable]
{$lua}
if readInteger('ctrls') ~= 0 then
   WEAPON_UPDATER.Enabled = true;
   mainweapon_hotkey.Enabled, altweapon_hotkey.Enabled = true, true;
   weapon_editor.show();
end
{$asm}
[disable]
{$lua}
WEAPON_UPDATER.Enabled = false;
weapon_editor.hide();
</AssemblerScript>
        </CheatEntry>
        <CheatEntry>
          <ID>8</ID>
          <Description>"Current Ammo"</Description>
          <Color>FF0000</Color>
          <VariableType>Float</VariableType>
          <Address>[ctrls]+274</Address>
        </CheatEntry>
        <CheatEntry>
          <ID>9</ID>
          <Description>"Max Ammo"</Description>
          <Color>FF0000</Color>
          <VariableType>Float</VariableType>
          <Address>[ctrls]+278</Address>
        </CheatEntry>
        <CheatEntry>
          <ID>11</ID>
          <Description>"Bombs"</Description>
          <Color>FF0000</Color>
          <VariableType>4 Bytes</VariableType>
          <Address>[ctrls]+2fc</Address>
        </CheatEntry>
        <CheatEntry>
          <ID>16</ID>
          <Description>"Fire Rate"</Description>
          <Color>FF0000</Color>
          <VariableType>Float</VariableType>
          <Address>[ctrls]+2dc</Address>
        </CheatEntry>
        <CheatEntry>
          <ID>17</ID>
          <Description>"Damage"</Description>
          <Color>FF0000</Color>
          <VariableType>Float</VariableType>
          <Address>[ctrls]+2d8</Address>
        </CheatEntry>
      </CheatEntries>
    </CheatEntry>
    <CheatEntry>
      <ID>7</ID>
      <Description>"Player Stats"</Description>
      <LastState Value="" RealAddress="00000000"/>
      <Color>0000FF</Color>
      <GroupHeader>1</GroupHeader>
      <CheatEntries>
        <CheatEntry>
          <ID>3</ID>
          <Description>"Item Editor"</Description>
          <LastState/>
          <Color>004000</Color>
          <VariableType>Auto Assembler Script</VariableType>
          <AssemblerScript>[enable]
{$lua}
if readInteger('ctrls') ~= 0 then
   reinit_items();
   ITEM_UPDATER.Enabled = true;
   item_editor.show();
   showMessage'Hover on an item to read what it does.';
end
{$asm}
[disable]
{$lua}
ITEM_UPDATER.Enabled = false;
item_editor.hide();
</AssemblerScript>
        </CheatEntry>
        <CheatEntry>
          <ID>5</ID>
          <Description>"Money"</Description>
          <Color>FF0000</Color>
          <VariableType>4 Bytes</VariableType>
          <Address>[ctrls]+300</Address>
        </CheatEntry>
        <CheatEntry>
          <ID>12</ID>
          <Description>"Speed"</Description>
          <Color>FF0000</Color>
          <VariableType>Float</VariableType>
          <Address>[ctrls]+2d0</Address>
        </CheatEntry>
        <CheatEntry>
          <ID>14</ID>
          <Description>"Armor"</Description>
          <Color>FF0000</Color>
          <VariableType>4 Bytes</VariableType>
          <Address>[ctrls]+2f8</Address>
        </CheatEntry>
        <CheatEntry>
          <ID>13</ID>
          <Description>"Jump Height"</Description>
          <Color>FF0000</Color>
          <VariableType>Float</VariableType>
          <Address>[ctrls]+2d4</Address>
        </CheatEntry>
      </CheatEntries>
    </CheatEntry>
  </CheatEntries>
  <UserdefinedSymbols>
    <SymbolEntry>
      <Name>ctrls</Name>
      <Address>0DBD0077</Address>
    </SymbolEntry>
    <SymbolEntry>
      <Name>swap_activated</Name>
      <Address>0DBD007B</Address>
    </SymbolEntry>
    <SymbolEntry>
      <Name>weapons</Name>
      <Address>0DBD0084</Address>
    </SymbolEntry>
    <SymbolEntry>
      <Name>icon_curr</Name>
      <Address>0DBD007C</Address>
    </SymbolEntry>
    <SymbolEntry>
      <Name>icon_new</Name>
      <Address>0DBD0080</Address>
    </SymbolEntry>
    <SymbolEntry>
      <Name>updateIcon</Name>
      <Address>0DBD0034</Address>
    </SymbolEntry>
  </UserdefinedSymbols>
  <LuaScript>local weapons = {
'Shotgun',
'Gilead\'s Gun',
'Rocket Launcher',
'Grenade Launcher',
'Sickle',
'Laser Shotgun',
'Crossbow',
'Flak Cannon',
'M14',
'Trident',
--alt
'Annihilator',
'Cannon',
'Tenchi Sword',
'Recoil Rifle',
'Blowfish Gun',
'Hanz Pistol',
'Laser Rifle'
};
local weapon_addresses = { };
local Icon_offsets = {
['Blowfish Gun'] = 0x88,
['Laser Rifle'] = 0x8c,
['Tenchi Sword'] = 0x90,
['Hanz Pistol'] = 0x94,
Cannon = 0x98,
Annihilator = 0x9c,
['Recoil Rifle'] = 0xa0
};
local prev_ctrls_weapon = 0;
local inf = math.huge;
local items = {
magnet=648,
gaangus=660,
poison_bombs=649,
doxy=691,
skullito=741,
sand_shark=699,
chosen_one=700,
kamikaze=702,
dinghy=679,
mario=698,
flipper=697,
blast_shield=685,
rabbit_foot=676,
piracy=668,
hanz_chainsaws=701,
angel_wings=669,
anchor=643,
cherry_bomb=662,
starfish=657,
evil_eye=706,
ghost=686,
iris_wings = 742,
compass = 658,
flip_flops = 651,
mushroom = 665,
powder_keg = 639,
gum = 636,
shield_lover = 654,
spinach = 640,
zen_focus = 675,
oar = 694,
green_ovaries = 655,
turtle_shell = 750,
horseshoe = 644
};
function reinit_items()
         local form = item_editor;
         for item, offset in pairs(items) do
             form[item].Checked = (readBytes(string.format('[ctrls]+%x', offset), 1) == 1);
         end
end
function hook()
         LaunchMonoDataCollector();
         local update = getAddress'controls:Update';
         local get_gameObject = getAddress'UnityEngine:Component:get_gameObject';
         local SetActive = getAddress'UnityEngine:GameObject:SetActive';
         autoAssemble(string.format([[alloc(m,2048)
label(hook_ctrls_update)
label(updateIcon)
label(weapons)
label(ctrls)
label(return)
label(return2)
label(icon_curr)
label(icon_new)
label(swap)
label(swap_activated)
m:
hook_ctrls_update:
mov edi, [esp+4]
mov [ctrls], edi
db 55 8B EC 53 57
jmp return
swap:
jnz return2
cmp byte ptr[swap_activated], 1
je +5
jmp %08X
mov byte ptr[swap_activated], 0
jmp return2
updateIcon:
mov eax, [ctrls]
add eax, [icon_curr]
mov eax, [eax]
push eax
call %08X
add esp,4
push 0
push eax
call %08X
add esp,8
mov eax,[ctrls]
add eax,[icon_new]
mov eax, [eax]
push eax
call %08X
add esp,4
push 1
push eax
call %08X
add esp,8
ret
ctrls:
dd 0
swap_activated:
db 0
icon_curr:
dd 0
icon_new:
dd 0
weapons:
controls:Update:
jmp hook_ctrls_update
return:
%08X:
jmp swap
db 90
return2:
registersymbol(ctrls)
registersymbol(swap_activated)
registersymbol(weapons)
registersymbol(icon_curr)
registersymbol(icon_new)
registersymbol(updateIcon)]], update+0x1466, get_gameObject, SetActive, get_gameObject, SetActive, update+0x966));
local base = getAddress'weapons';
for i,v in ipairs(weapons) do
    local len = #v;
    writeBytes(base+8, len);
    writeString(base+12, v, true);
    weapon_addresses[v] = base;
    base = base + 12 + 2*len;
end
local t = createTimer();
t.Enabled = false;
t.Interval, t.onTimer = 2000, function(self)
               local ctrls = readInteger'ctrls';
               if ctrls ~= prev_ctrls_weapon then
                            local current_weapon = readString('[[ctrls]+ac]+c', 2*readBytes('[[ctrls]+ac]+8',1)+2, true);
                            local current_alt = readString('[[ctrls]+b0]+c', 2*readBytes('[[ctrls]+b0]+8',1)+2, true);
                            for i = 1, 10 do
                                if weapons[i] == current_weapon then
                                   weapon_editor.main_weapon.ItemIndex = i - 1;
                                   break;
                                end
                            end
                            for i = 11, 17 do
                                if weapons[i] == current_alt then
                                   weapon_editor.alt_weapon.ItemIndex = i - 11;
                                   break;
                                end
                            end
                  prev_ctrls_weapon = ctrls;
               end
end
WEAPON_UPDATER = t;
local t2 = createTimer();
t2.Enabled = false;
t2.Interval, t2.onTimer = 1000, function(self)
               return reinit_items();
end
ITEM_UPDATER = t2;
end
if getOpenedProcessID() ~= 0 then
   hook();
else
    local t = createTimer();
    t.Interval, t.onTimer = 1000, function(self)
                if getOpenedProcessID() ~= 0 then
                   hook();
                   self.destroy();
                end
    end
end
function swap()
         return writeBytes('swap_activated', 1);
end
function changeIcon(curr, new)
         local offset_curr, offset_new = Icon_offsets[curr], Icon_offsets[new];
         writeInteger('icon_curr', offset_curr);
         writeInteger('icon_new', offset_new);
         return autoAssemble'createthread(updateIcon)';
end
function changeAlt(self)
         local selected = weapon_editor.alt_weapon.Text;
         if selected == '' then return end;
         changeIcon(readString('[[ctrls]+b0]+c', 2*readBytes('[[ctrls]+b0]+8',1)+2, true), selected);
         if readBytes('[ctrls]+272', 1) == 0 then -- using Alt
            swap();
            sleep(800);
            writeInteger('[ctrls]+b0', weapon_addresses[selected]);
            sleep(800);
            swap();
         else
             return writeInteger('[ctrls]+b0', weapon_addresses[selected]);
         end
end
function changeMain(self)
         local selected = weapon_editor.main_weapon.Text;
         if selected == '' then return end;
         if readBytes('[ctrls]+272', 1) == 1 then -- using Main
            if readBytes('[[ctrls]+b0]+8', 1) == 0 then -- no alt owned =&gt; give him a Tenchi Sword
               changeIcon('Tenchi Sword', 'Tenchi Sword');
               writeInteger('[ctrls]+b0', weapon_addresses['Tenchi Sword']);
            end
            swap();
            sleep(800);
            writeInteger('[ctrls]+ac', weapon_addresses[selected]);
            sleep(800);
            swap();
         else
             return writeInteger('[ctrls]+ac', weapon_addresses[selected]);
         end
end
mainweapon_hotkey = createHotkey(changeMain, VK_CONTROL, VK_X);
altweapon_hotkey = createHotkey(changeAlt, VK_CONTROL, VK_Z);
mainweapon_hotkey.Enabled, altweapon_hotkey.Enabled = false, false;
function checkPowerup(self)
            return writeBytes(string.format('[ctrls]+%x', items[self.Name]), self.Checked and 1 or 0);
end
local list = getAddressList();
local weapon_script = list.getMemoryRecordByDescription('Weapon Editor');
local item_script = list.getMemoryRecordByDescription('Item Editor');
function weapon_close(sender)
  weapon_script.Active = false;
  return caNone --Possible options: caHide, caFree, caMinimize, caNone
end
function item_close(sender)
  item_script.Active = false;
  return caNone;
end
</LuaScript>
</CheatTable>
