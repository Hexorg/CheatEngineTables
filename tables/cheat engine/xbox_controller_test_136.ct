<?xml version="1.0" encoding="utf-8"?>
<CheatTable CheatEngineTableVersion="24">
  <Forms>
    <UDF1 Class="TCEForm" Encoding="Ascii85">=O97}8@.-5k_vkj/)m^qy^V@d+=LiyY*i2$ijpk3l0^3jEjzA{mAIBzQCxYss-=DQ.ZqFM+BUwW*S@XiJro9dX%QDF;SJ;.TJ*0iU/63g7joz!$lrfvMedT}QWBdYJ!pjihdVR;_NY/pnBfRI7$%jR8DLY1:@07hI)2JmX7JR![*xLDW@A*!W[=4kw3^s^Y1:GW=[_:-h9zZY6T-HVk#aUV-I;T^#GF!]%(XrElO1zwQm$]GPz3IGUWWNCHij_bUo:WSqs%YxO$gte!G@Dx2{XT=?_-+.(,#6c-Tsx!=Ca_?91DfQdv:Zo)i_NB0eNS(vHz7mmSuCC!%bxdf[0x(o9l9WprD@N2lq$v-sAPvq{$Fqas@p[UjRlgkHY24mp3cT=dt04Z+FOYU_k4(^s8b!7jV22c.5M%(}RMcxbC}$zHX/;4Gr}.aQE(#n4h2jab?o7]s49QIDf7enwwgnKGFaIe-J!wFSuQv(-^LWis$*eoLXO^Me6E8BdGV6j*EW22CvT#=QI;fvAzNK?8ADfCH:Frvn^FR6x;*=q!],w=L^1sa6Ogb?[4_FK60Tw#3tV5qC8QqoKB1xY!05b0]D%wkC;q6Ob[fRJ1^+x^X-,pl8Z?rD6Yd;V@]pG[Zf/zrMZ:2?S.yh3k5=EMm#Q$mo[Kj!MFkzby?8W2-i1((A{CIC.SooLjy6]^q_!RA0L0]#fuje@/TR-]!c)@1:p_5!C;D2bar,[YfBWup$G(6byUu_p7YSz)FF_,O+E#,cdyq6mo8q0zTSRl!TINqKgtE,-s7YA$I,();:uc=kdggUiRrzy*im5m-G-5(VK_GNb,mUvs4k2ghSBZ[$dB=6pO}ar^1[iZKjEq8;@X:H4$)NfaA8E^ANBjZerQCjN%ZTQu:.Ven7wuDcH@DfD/C_02S)8zBAZ}K^G,XrhDI2[a,TUgcqaa,Lrfv$r?g%cE,A$v;ht,R.9yBSxUuhtXlonVo]Yoa:JUhyX7R?2U).)M#K$M7Zj61vJO(TS@#[8]8g0Y.41y2*9,d4y=#a8s+bw492f/)jJoN#X5a*3]1OaaVVmL.48.V@Rc:P5;Rs9na6T9EM^^XJfeS;mGVsW5/5F+GcvEPreMs$-.qMtOv1Bbcb.9L.#lXwh6dv6aod5rx=6jpBEgSYS9_JzaO#$s}8OLCC#,:cN,a(Z^[NorF:Q!}{u,SX2EpXep{TUw*-2bc=/0DS8P#z{KCaI6c$!6BHvz6/(7M-Y$4zkk%*H8+=x[t;DRv6/#y?A+Eozk%9KbT%Ot!UfSCiqu0h;L*qKyL{i7A#mC[?ON{$e1;TpJxp)qypITiaH#HytCP(w+jRF5VF9M6W)aR@apV%TG[@uqAVfLfu-+)^et!DNr_^(-6PhC:RtP=*),mDkJzRQ[!TQw/[wK(@CDxTc9JhXl!^PS@v1W]6U!=I%a++Vf6XTJ0y5Z?(PvP0KXYlgnORN#Cbo_WO9[k0y%7M+lgU0$Mk]w/V,riS!rDJbj7[Yx;LD=j*Mn{hJ9*^^7l!wmFPT1JkfZ@d]:/e#KIZo:-mAA%$.3lzypPwXeCKI+nohvIVg[.!Z=moSZ]Tf)2BNsD:#7%#H-?s3z)YB^OXL{M}*tTk[@XEsJhkIDDAB*9K4v.6$$?72yK$Yhs0MCc.CHwx;FWC3-rvzyqYRyC1Kh*Mr,P}Fy@$WHA06ZVTVGp}QOJt=I$U4Z43GLdGQa)d(L_D)ZG$rOY6:@#m/]hw8=5V[bQpkzfQ;))-W,/Lp,mPhtOj.zDEPV,nr@r(4wWVcpdlD!cCLPux/mE_8QKYRpZ8#-umoHYYZT=lbwlTMmTN{%d81;r5Jma5}/g[R,ZwqUg,/G6GZ4PQzIRu[PC9E!zNoKN^6p(l/iXbaS)CNb3fYYTa=0HjduvKgtZjTPPCB3svrJI+Zgqt51WNX$;[1.QqQcQa5)]o5)(d7ReI+VUxGhbcnFC8pfS[!{9SIhweY+W2ci,65lCYVc1Ac[o75SFTA2y3HD1VzbG6]/3_d#t*P(s(8{9ASk]DuU4ipP!ydX{}Qy.QNtnL[X198{*{9t%l]$hS@j!fSu{Hn!7fuv+47?0(^k=8v2MfrmC(LZCUVMKR}Tb+d!C{!lo+N36]de]qu0zLN=D(YG_zt/0fcjX/Zic]AI:GXAK!ga_^Vr3!bq;xK:gDS8CAd^d=tC%yBKUS^8(_3ox27Hp:_Gu!:#SRkEvDRb#0a%{i0FHJ.6@:UBUtRWGd[@!pa{Si2(q7TM!FinN@hj%c@d3wzQI8Oo_dd^U6HlaR8KY{c1evux.gwPG2;Wr3sedZ[by)TPhsC$a}fXk4*oT/uPj[W_.z_D6{?Ixos!qZdtkMiiQM52-uG44QUT0^;+HyeY,u]78R}bXOzGp$EKMJ=d*Qr_4Q0[0Ns::})rB,O)n{:JbdS@Tf1Q8)P!eQ3@X{HnKy5tjjN64[T-:DvTiS9tCn*z-Xrc9ptzM+^Or/NNwzFtr985:NNLzIixHYo?2/]qnu,3l@:7Kn)!Abhkd2tLo$LZ^m/enrsO{1uXF^(#W,$*A)K-krCp9[isyu@v}FaqMn]Q1YwL{SR,k6M4@GD6uwNu9vc^CMrYn4gm5ZYYm#Q6{4yg!7B%o_FsNmQmJJGFkB2S?L[oB_m,N^tC[=rE:=;f5U,4nyOjn808wL[LtcF6KjUGDu[ar3ylGgmAw-hCZeQI2j*vNBp0eLPx[khWGO@j}0(bhHIY$?n-?G]P0nSzKP-hbk-C0xMz43b*V7nM#]%$IU6=R*Iwa]7*PFi?RpVMf(-@Wktrxd6UgFU@5NcOfj2jh[Nm!ds(fnujQv=X=qF[/9sHs],?2]l?fOqTvEa1F%?L6#C4Y6nD$X#D!PKdomrIy)#?B9.egPgib7u)gpO%K$-L.6q*2il+QR9rv5p5zUZIJ/K/25UR_:woC890gGdX5t?zIW$TiY_I:[(7HOYy42618Zo[!vz7#PsA2Iy(cERdS@(EPpQUef3nw2L/?_its()m^,3Nq79mGe,5:9RAlAzg4je,tdnN@.j{mvwUQX}?[7xs1oXVPke4zY2Z.ImL1Mg:7,Etz6CcFF@B)</UDF1>
  </Forms>
  <CheatEntries/>
  <UserdefinedSymbols/>
  <LuaScript>function pressIt(comp,bool)
  comp.BevelOuter=bool and 1 or 2
  comp.BevelWidth=bool and 5 or 1
end

function ControllerStateThreadFunc(thread)
  thread.Name = 'ControllerStateThreadFunc'
  thread.freeOnTerminate(false)

  while not thread.Terminated do
  thread.synchronize(function ()
  local controllerState = getXBox360ControllerState(UDF1.comboControllerPort.ItemIndex)

  if controllerState~=nil and PacketNumberOld~=controllerState.PacketNumber
  then

    PacketNumberOld=controllerState.PacketNumber

    UDF1.Caption = 'port:'..UDF1.comboControllerPort.ItemIndex..', Packet Number: '..PacketNumberOld

    --dpad
    pressIt(UDF1.dup,controllerState.GAMEPAD_DPAD_UP)
    pressIt(UDF1.ddown,controllerState.GAMEPAD_DPAD_DOWN)
    pressIt(UDF1.dleft,controllerState.GAMEPAD_DPAD_LEFT)
    pressIt(UDF1.dright,controllerState.GAMEPAD_DPAD_RIGHT)

    --abxy buttons
    pressIt(UDF1.a,controllerState.GAMEPAD_A)
    pressIt(UDF1.b,controllerState.GAMEPAD_B)
    pressIt(UDF1.x,controllerState.GAMEPAD_X)
    pressIt(UDF1.y,controllerState.GAMEPAD_Y)

    --LB RB buttons
    pressIt(UDF1.lb,controllerState.GAMEPAD_LEFT_SHOULDER)
    pressIt(UDF1.rb,controllerState.GAMEPAD_RIGHT_SHOULDER)

    --LT RT triggers
    UDF1.lt.setPosition2(controllerState.LeftTrigger)
    UDF1.rt.setPosition2(controllerState.RightTrigger)
    UDF1.ltlbl.Caption = controllerState.LeftTrigger
    UDF1.rtlbl.Caption = controllerState.RightTrigger

    ThumbLeftX  = controllerState.ThumbLeftX
    ThumbLeftY  = controllerState.ThumbLeftY
    ThumbRightX = controllerState.ThumbRightX
    ThumbRightY = controllerState.ThumbRightY

    UDF1.LeftAnalog.repaint()
    UDF1.RightAnalog.repaint()

    --start and back buttons
    pressIt(UDF1.start,controllerState.GAMEPAD_START)
    pressIt(UDF1.back,controllerState.GAMEPAD_BACK)

    --thumb buttons
    pressIt(UDF1.ThumbLeft,controllerState.GAMEPAD_LEFT_THUMB)
    pressIt(UDF1.ThumbRight,controllerState.GAMEPAD_RIGHT_THUMB)
  end
  end)
  end
end

if ControllerStateThread then -- kill previous thread
   ControllerStateThread.terminate()
   ControllerStateThread.waitfor()
   ControllerStateThread.destroy()
   ControllerStateThread=nil
end

ControllerStateThread=createNativeThread(ControllerStateThreadFunc)

UDF1.LeftAnalog.OnPaint='AnalogOnPaint'
UDF1.RightAnalog.OnPaint='AnalogOnPaint'

ThumbLeftX,ThumbLeftY,ThumbRightX,ThumbRightY=0,0,0,0

function AnalogOnPaint(paintbox)
  local canvas,x,y = paintbox.Canvas

  canvas.Pen.Color = 0x000000
  canvas.Pen.Width = 1
  canvas.ellipse(96,96,103,103)

  canvas.Pen.Color = 0x5555AA
  canvas.Pen.Width = 5

  if paintbox==UDF1.LeftAnalog then
    x,y=ThumbLeftX,-ThumbLeftY
  else
    x,y=ThumbRightX,-ThumbRightY
  end

  x = x*199/65536+99.5
  y = y*199/65536+99.5

  canvas.ellipse(x-3,y-3,x+3,y+3)
end

UDF1.btnLeftMotor.OnClick=
  function ()
    setXBox360ControllerVibration(UDF1.comboControllerPort.ItemIndex,
                                  UDF1.tbLeftMotor.Position*65, 0)
  end
UDF1.btnRightMotor.OnClick=
  function ()
    setXBox360ControllerVibration(UDF1.comboControllerPort.ItemIndex,
                                  0,UDF1.tbRightMotor.Position*65)
  end

UDF1.show()

function FormClose(sender)
  closeCE()
  return caFree --Possible options: caHide, caFree, caMinimize, caNone
end
</LuaScript>
</CheatTable>
